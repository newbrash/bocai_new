webpackJsonp([36],{cp1F:function(e,t){},sWFA:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),console.log("LOGIN_REGIST_VUE");var a={data:function(){return{username:"",password:"",invitedKey:"",yzm:"",mode:"",placeholder:"用户名",phoneCheck:!1,maxLenght:0,invitedCode:"",keyword:"",prefix:"",handle:"",time:0}},watch:{},methods:{regist:function(){var e=this;if(this.invitedKey==this.invitedCode){if(1==this.mode){if(this.keyword.test(this.username)){var t=this.keyword.exec(this.username);return console.log(t),this.$messagebox.alert("用户名存在非法字眼：“"+t[1]+"”!"),!1}if(this.username.length>this.maxLenght)return this.$messagebox.alert("用户名超出最大长度"+this.maxLenght+"了！"),!1}else{if(2!=this.mode&&3!=this.mode)return this.$messagebox.alert("抱歉，当前未开发注册功能！","提示",{confirmButtonText:"知道了",callback:function(t){e.$router.push("/")}}),!1;this.placeholder="手机号";var s=new RegExp(/[^0-9]+/);if(11!=this.username.length||s.test(this.username))return this.$messagebox.alert("请输入正确的手机号！"),!1;if(3==this.mode&&!this.yzm)return this.$messagebox.alert("请输入验证码！"),!1}var a={type:"registerMember",username:this.username,password:this.password,code:this.yzm,invitedCode:this.invitedKey,mode:this.mode,con_id:this.GLOBAL.connectionId},n=this;this.senddata({data:a,callback:function(e){e.status?e.wellcome?n.$messagebox.alert(e.wellcome,"提示",{confirmButtonText:"确定",callback:function(e){n.$router.push("/login")}}):n.$messagebox.confirm("注册成功！现在去登陆？").then(function(e){n.$router.push("/login")}).catch(function(e){n.$router.push("/")}):e.msg?n.$messagebox.alert(e.msg):n.$messagebox.alert("网络堵塞，请稍后再试！")},handType:"user"})}else this.$messagebox.alert("邀请码不正确！")},getYam:function(){var e=this;if(!this.username||11!=this.username.length)return this.$messagebox.alert("请输入正确的手机号！","提示",{confirmButtonText:"好的",callback:function(t){document.getElementById("username-input-box").focus(),e.$messagebox.close()}}),!1;var t={type:"getYanZhengMa",phone:this.username,con_id:this.GLOBAL.connectionId},s=this;this.senddata({data:t,callback:function(e){e.status?(s.time=30,s.computedTime()):e.msg?s.$messagebox.alert(e.msg):s.$messagebox.alert("网络堵塞，请稍后再试！")},callbackFlag:"responeGetYanZhengMa",handType:"user"})},computedTime:function(){var e=this;this.handle=setInterval(function(){e.time?e.time--:clearInterval(e.handle)},1e3)}},mounted:function(){this.$parent.tabbarShow=!1;var e=this;this.checkSocket(function(){var t={type:"getRegisterRules",con_id:e.GLOBAL.connectionId};e.senddata({data:t,callback:function(t){switch(t.rules.register_mod){case 0:return e.$messagebox.alert("抱歉！当前未开发注册功能，请留意官方通知!").then(function(t){e.$router.push("/")}),!1;case 1:e.placeholder="用户名";break;case 2:e.placeholder="手机号";break;case 3:e.placeholder="手机号",e.phoneCheck=!0}e.maxLenght=t.rules.register_max_length,e.invitedCode=t.rules.register_check_key,e.keyword=new RegExp("("+t.rules.register_keyword+")"),e.prefix=t.rules.register_prefix,e.startCode=t.rules.register_start_number,e.mode=t.rules.register_mod},callbackFlag:"responeGetRegisterRules",handType:"user"})}),this.onmessage()}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("mt-header",{attrs:{title:"",fixed:"true"}},[s("router-link",{attrs:{slot:"left",to:"/"},slot:"left"},[s("mt-button",{attrs:{icon:"back"}},[e._v("退出注册")])],1)],1),e._v(" "),s("div",{staticClass:"pageContent",attrs:{id:"registPage"}},[s("div",{staticClass:"title"},[e._v("用户注册")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"username-box",attrs:{id:"username-input-box",type:"text",placeholder:e.placeholder},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.phoneCheck,expression:"phoneCheck"}],staticClass:"yzm"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.yzm,expression:"yzm"}],staticClass:"username-box yzm-box",attrs:{placeholder:"验证码"},domProps:{value:e.yzm},on:{input:function(t){t.target.composing||(e.yzm=t.target.value)}}}),e._v(" "),e.time?s("button",{staticClass:"yzm-btn"},[e._v(e._s(e.time))]):s("mt-button",{staticClass:"yzm-btn",on:{click:e.getYam}},[e._v("获取验证码")])],1),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"username-box",attrs:{placeholder:"密码",type:"password",align:"left"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.invitedKey,expression:"invitedKey"}],staticClass:"username-box",attrs:{placeholder:"邀请码",type:"password",align:"left"},domProps:{value:e.invitedKey},on:{input:function(t){t.target.composing||(e.invitedKey=t.target.value)}}}),e._v(" "),s("mt-button",{staticClass:"register-btn",attrs:{size:"large"},on:{click:e.regist}},[e._v("注册")]),e._v(" "),s("router-link",{staticClass:"tips-box",attrs:{to:"/login"}},[e._v("已有帐号？马上登录")])],1)],1)},staticRenderFns:[]};var r=s("VU/8")(a,n,!1,function(e){s("cp1F")},"data-v-49656d0e",null);t.default=r.exports}});
//# sourceMappingURL=36.c513e7ba9f815b8bdf8d.js.map