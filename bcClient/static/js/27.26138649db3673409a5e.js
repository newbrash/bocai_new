webpackJsonp([27],{"81+s":function(t,e){},tmGb:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("fZjL"),i=s.n(n),o=s("mvHQ"),a=s.n(o),r={data:function(){return{money:"",remark:"恭喜发财，大吉大利",trading:"",show:!1,redNum:1}},watch:{money:function(){this.money=Math.round(100*this.money)/100},trading:function(){if(6==this.trading.length){this.show=!1;var t=this;if(this.trading==this.GLOBAL.userInfo.trading){console.log(this.GLOBAL.friendInfo);var e={send_id:this.GLOBAL.userInfo.id,get_id:this.GLOBAL.friendInfo.info?this.GLOBAL.friendInfo.info.id:"",type:"sendRedBagToFriend",gold:this.money,remark:this.remark,trading:this.trading,send_time:this.showDate(),status:this.GLOBAL.friendInfo.status?this.GLOBAL.friendInfo.status:"",con_id:this.GLOBAL.connectionId,fcon_id:this.GLOBAL.friendInfo.info?this.GLOBAL.friendInfo.info.connectionID:"",redType:this.$route.query.rType?2:1,recive_num:this.$route.query.rType?this.redNum:1};this.senddata({data:e,callback:function(s){if(s.status)if(t.GLOBAL.userInfo.gold-=e.gold,localStorage.setItem("bc_userInfo",a()(t.GLOBAL.userInfo)),t.$route.query.rType){var n=i()(t.GLOBAL.chatRoomMsgList).length;t.$set(t.GLOBAL.chatRoomMsgList,n,{}),s.msg.head=t.GLOBAL.userInfo.head,s.msg.nickname=t.GLOBAL.userInfo.nickname,t.setGlobalAttribute(t.GLOBAL.chatRoomMsgList[n],s.msg),t.$router.push("/chatroom")}else{console.log(e),t.GLOBAL.msgList[e.get_id]||t.$set(t.GLOBAL.msgList,e.get_id,{});n=i()(t.GLOBAL.msgList[e.get_id]).length;t.$set(t.GLOBAL.msgList[e.get_id],n,{}),t.setGlobalAttribute(t.GLOBAL.msgList[e.get_id][n],s.msg),t.$router.push("/chat")}else console.log(s),t.$messagebox.alert(s.errMsg).then(function(t){})},handType:"user"})}else this.$messagebox.alert("密码错误！").then(function(e){t.show=!0,t.trading="",t.$nextTick(function(){document.getElementById("tradingbox").focus()})})}else this.trading=this.trading.substring(0,6);console.log(this.trading)}},beforeCreate:function(){var t=this;console.log(this.GLOBAL.userInfo),this.GLOBAL.userInfo.trading||this.$messagebox.confirm("您目前还没有设置交易密码，请前往“我的设置”设置交易密码").then(function(e){t.$router.push("/transPsd")}).catch(function(e){t.$router.push("/chat")})},mounted:function(){this.checkLogin(),this.onmessage(),this.$parent.tabbarShow=!1},methods:{sendredbag:function(){if(this.money){if(this.$route.query.rType&&this.money<this.redNum)return this.$messagebox.alert("红包金额不得小于红包个数！"),!1;this.GLOBAL.userInfo.gold>=this.money?(this.show=!0,this.$nextTick(function(){document.getElementById("tradingbox").focus()})):this.$messagebox.alert("您的余额为"+this.GLOBAL.userInfo.gold+",不足以发红包！")}},cancelTrading:function(){this.show=!1}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("mt-header",{attrs:{title:"发红包",fixed:"true",id:"redbagbox"}},[s("router-link",{attrs:{slot:"left",to:this.$route.query.rType?"/chatroom":"/chat"},slot:"left"},[s("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1)],1),t._v(" "),s("section",{staticClass:"bodybox"},[s("div",{staticClass:"jinebox redbox"},[s("span",[t._v("金额")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.money,expression:"money"}],attrs:{type:"number",placeholder:"0.00"},domProps:{value:t.money},on:{input:function(e){e.target.composing||(t.money=e.target.value)}}}),t._v(" "),s("span",[t._v("元")])]),t._v(" "),s("div",{staticClass:"liuyanbox redbox"},[s("span",[t._v("留言")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],staticStyle:{width:"86%","font-weight":"bold"},attrs:{type:"text",placeholder:"恭喜发财，大吉大利"},domProps:{value:t.remark},on:{input:function(e){e.target.composing||(t.remark=e.target.value)}}})]),t._v(" "),this.$route.query.rType?s("div",{staticClass:"jinebox redbox"},[s("span",[t._v("红包个数")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.redNum,expression:"redNum"}],attrs:{type:"number",placeholder:"0.00"},domProps:{value:t.redNum},on:{input:function(e){e.target.composing||(t.redNum=e.target.value)}}}),t._v(" "),s("span",[t._v("元")])]):t._e(),t._v(" "),s("div",{staticClass:"money"},[s("span",[t._v("￥")]),t._v(" "),t.money?s("span",{attrs:{id:"moneyNum"}},[t._v(t._s(t.money))]):s("span",{attrs:{id:"moneyNum"}},[t._v("0.00")])]),t._v(" "),s("div",{staticClass:"btnbox",class:t.money?"active":"",on:{click:t.sendredbag}},[t._v("塞钱进红包")])]),t._v(" "),s("section",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[s("div",{staticClass:"backbox",attrs:{id:"backbox"}}),t._v(" "),s("div",{staticClass:"input-password-box",attrs:{id:"input-password-box"}},[s("div",{staticClass:"title-box"},[s("img",{attrs:{src:this.GLOBAL.Host+this.GLOBAL.userInfo.head,alt:""}}),t._v(" "),s("span",{staticClass:"title-t"},[t._v("请输入交易密码")]),t._v(" "),s("span",{staticClass:"canclebtn",on:{click:t.cancelTrading}},[t._v("x")])]),t._v(" "),s("div",[s("p",{staticClass:"redbag-name"},[t._v("红包")]),t._v(" "),s("p",{staticClass:"redbag-money"},[t._v("￥\n          "),s("span",[t._v(t._s(t.money))])])]),t._v(" "),s("div",{staticClass:"inputbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.trading,expression:"trading"}],attrs:{id:"tradingbox",type:"password"},domProps:{value:t.trading},on:{input:function(e){e.target.composing||(t.trading=e.target.value)}}})])])])],1)},staticRenderFns:[]};var u=s("VU/8")(r,d,!1,function(t){s("81+s")},"data-v-9de50ac8",null);e.default=u.exports}});
//# sourceMappingURL=27.26138649db3673409a5e.js.map