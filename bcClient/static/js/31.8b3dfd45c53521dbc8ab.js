webpackJsonp([31],{ihZ3:function(t,e){},"nGC+":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),console.log("USER_REDBAG_REDBAG_VUE");var i={data:function(){return{title:"发出的红包",title1:this.GLOBAL.userInfo.nickname+"发出的红包",deg:!0,year:"",yearList:[],list:"",totalSendSum:0,totalSendNum:0,redSendYear:"",redSendPage:0,redSendList:"",totalReciveSum:0,totalReciveNum:0,redReciveYear:"",redRecivePage:0,redReciveList:"",choseYearStatus:!1,flag:!0,redStatus:!1,watchStatus:!1}},created:function(){var t=new Date;this.year=t.getFullYear(),this.redSendYear=this.year,this.redReciveYear=this.year;for(var e=0;e<5;e++)this.yearList[e]=this.year-e;this.$parent.tabbarShow=!1,this.GLOBAL.friendInfo={}},mounted:function(){var t=this;this.checkLogin(function(){console.log("hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh"),t.$route.query.flag?(t.flag=!1,t.title="收到的红包",t.title1=t.GLOBAL.userInfo.nickname+"收到的红包",console.log("::::::::::::::::::::::::::::::::::::::::::::::::::::::"),t.getReciveRedList()):(console.log("''''''''''''''''''''''''''''''''''''''''''''''''''''''"),t.getSendRedList()),t.watchStatus=!0}),this.onmessage()},watch:{year:function(){this.flag?(this.deg=!0,this.choseYearStatus=!1,this.redSendYear=this.year,this.redSendList="",this.redSendPage=0,this.totalSendSum=0,this.totalSendNum=0,this.watchStatus&&this.getSendRedList()):(this.deg=!0,this.choseYearStatus=!1,this.redReciveYear=this.year,this.redReciveList="",this.redRecivePage=0,this.totalReciveSum=0,this.totalReciveNum=0,this.watchStatus&&this.getReciveRedList())}},methods:{gotoRedDetail:function(t){this.$router.push({path:"/redbagdetail",query:{red_id:t,flag:this.flag}})},cancel:function(){this.choseYearStatus=!1,this.redStatus=!1,this.deg=!0},changeToSendRed:function(){this.redStatus=!1,this.flag=!0,this.title="发出的红包",this.title1=this.GLOBAL.userInfo.nickname+"发出的红包",this.year=this.redSendYear,this.redSendList?this.list=this.redSendList:this.getSendRedList()},changeToRecivedRed:function(){this.redStatus=!1,this.flag=!1,this.title="收到的红包",this.title1=this.GLOBAL.userInfo.nickname+"收到的红包",this.year=this.redReciveYear,this.redReciveList?this.list=this.redReciveList:this.getReciveRedList()},changeRedStatus:function(){this.redStatus=!0},choseYear:function(){this.choseYearStatus=!0,this.deg=!1},getSendRedList:function(){var t={type:"getSendRedList",year:this.year,page:this.redSendPage,send_id:this.GLOBAL.userInfo.id,con_id:this.GLOBAL.connectionId},e=this;this.senddata({data:t,callback:function(t){e.redSendList?e.redSendList=e.redSendList.concat(t.list):e.redSendList=t.list,e.list=e.redSendList,t.totalNum&&(e.totalSendNum=t.totalNum),t.totalSum&&(e.totalSendSum=t.totalSum)},callbackFlag:"responeGetSendRedList",handType:"user"})},moreList:function(){this.flag?(this.redSendPage++,this.getSendRedList()):(this.redRecivePage++,this.getReciveRedList())},getReciveRedList:function(){var t={type:"getReciveRedList",year:this.year,page:this.redRecivePage,send_id:this.GLOBAL.userInfo.id,con_id:this.GLOBAL.connectionId},e=this;this.senddata({data:t,callback:function(t){e.redReciveList?e.redReciveList=e.redReciveList.concat(t.list):e.redReciveList=t.list,e.list=e.redReciveList,t.totalNum&&(e.totalReciveNum=t.totalNum),t.totalSum&&(e.totalReciveSum=t.totalSum)},callbackFlag:"responeGetReciveRedList",handType:"user"})}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"top-box"},[s("mt-header",{staticStyle:{background:"#B34B39 !important"},attrs:{title:t.title}},[s("router-link",{attrs:{slot:"left",to:"/user"},slot:"left"},[s("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1),t._v(" "),s("div",{staticClass:"ellipsis-box",attrs:{slot:"right"},on:{click:t.changeRedStatus},slot:"right"},[t._v("...")])],1),t._v(" "),s("div",{staticClass:"user-information-box"},[s("span",{staticClass:"year-box",on:{click:t.choseYear}},[t._v(t._s(t.year)+"\n        "),s("mt-button",{class:t.deg?"upbtn":"downbtn",attrs:{icon:"back"}})],1),t._v(" "),s("div",[s("div",{staticClass:"user-head-box"},[s("img",{attrs:{src:this.GLOBAL.Host+this.GLOBAL.userInfo.head,alt:""}})])]),t._v(" "),s("p",{staticClass:"user-tips-box"},[t._v(t._s(t.title1))])]),t._v(" "),t.flag?s("div",{staticClass:"red-total-money"},[s("span",[t._v(t._s(t.totalSendSum))]),t._v(" "),s("span",{staticClass:"yung-box"},[t._v("元")])]):s("div",{staticClass:"red-total-money"},[s("span",[t._v(t._s(t.totalReciveSum))]),t._v(" "),s("span",{staticClass:"yung-box"},[t._v("元")])]),t._v(" "),t.flag?s("div",{staticClass:"red-total-number"},[t._v("发出红包\n      "),s("span",{staticClass:"total-number"},[t._v(t._s(t.totalSendNum))]),t._v("个\n    ")]):s("div",{staticClass:"red-total-number"},[t._v("收到红包\n      "),s("span",{staticClass:"total-number"},[t._v(t._s(t.totalReciveNum))]),t._v("个\n    ")])],1),t._v(" "),s("section",{staticClass:"red-list-box"},[t.list&&Object.keys(t.list).length?s("ul",[t._l(t.list,function(e,i){return s("li",{key:i,staticClass:"one-red-info-box",on:{click:function(s){t.gotoRedDetail(e.id)}}},[s("div",{staticClass:"red-detail-up"},[s("span",{staticClass:"red-detail-child red-type"},[t._v(t._s(e.type))]),t._v(" "),s("span",{staticClass:"red-detail-child red-money"},[s("span",[t._v(t._s(e.money))]),t._v(" "),s("img",{attrs:{src:"static/64-金币.png",alt:""}})])]),t._v(" "),s("div",{staticClass:"red-detail-down"},[s("span",{staticClass:"red-detail-child red-date"},[t._v(t._s(e.send_time))]),t._v(" "),s("span",{staticClass:"red-detail-child red-status"},[t._v("已领取"+t._s(e.recived_num)+"/"+t._s(e.recive_num)+"个")])])])}),t._v(" "),t.flag&&t.redSendList.length<t.totalSendNum||!t.flag&&t.redReciveList.length<t.totalReciveNum?s("li",[s("button",{staticStyle:{border:"1px solid #999",color:"#999"},on:{click:t.moreList}},[t._v("查看更多")])]):t._e()],2):s("ul",[t.flag?s("li",{staticStyle:{width:"90vw",margin:"auto",height:"20vw","line-height":"20vw"}},[t._v("哎呀，今年忘发红包了！")]):s("li",{staticStyle:{width:"90vw",margin:"auto",height:"20vw","line-height":"20vw"}},[t._v("真遗憾，今年一个红包都没抢到！")])])]),t._v(" "),s("section",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.choseYearStatus||t.redStatus,expression:"choseYearStatus || redStatus"}],staticClass:"bgbox",on:{click:t.cancel}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.choseYearStatus,expression:"choseYearStatus"}],staticClass:"show-year-box"},[s("ul",[t._m(0),t._v(" "),t._l(t.yearList,function(e,i){return s("li",{key:i,staticClass:"year-options"},[s("span",[t._v(t._s(e)+"年")]),t._v(" "),e==t.year?s("input",{directives:[{name:"model",rawName:"v-model",value:t.year,expression:"year"}],attrs:{type:"radio",checked:""},domProps:{value:e,checked:t._q(t.year,e)},on:{change:function(s){t.year=e}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.year,expression:"year"}],attrs:{type:"radio"},domProps:{value:e,checked:t._q(t.year,e)},on:{change:function(s){t.year=e}}})])})],2)]),t._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.redStatus,expression:"redStatus"}],staticClass:"red-status-box"},[s("li",{on:{click:t.changeToRecivedRed}},[t._v("收到的红包")]),t._v(" "),s("li",{on:{click:t.changeToSendRed}},[t._v("发出的红包")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("span",[this._v("年份")])])}]};var n=s("VU/8")(i,a,!1,function(t){s("ihZ3")},"data-v-6419fc7a",null);e.default=n.exports}});
//# sourceMappingURL=31.8b3dfd45c53521dbc8ab.js.map